# 数据库思路
> 将实体类型记录类型进行区分，实体类型定义某种实体对象，例如某个商品、用户对合租者的某个要求。记录类型定义某个订单，例如某个正在等待加入的拼单、某个正在拼车的拼单、一次已经完成的订单等。

# 具体设计思路

## 系统级-用户类

> 定义app中全部的用户，包括商户，消费者，正在注册的临时用户等

##### 已注册用户-消费者
> 定义已注册消费者用户，应区分是否已经认证

###### 字段描述
+ 原生api包含字段
+ 是否已经认证
+ 认证日期
+ 用户名
+ 密码(加密后)
+ 信用度
+ 创建日期
+ 修改日期

##### 已注册用户-商户
> 定义已注册商户用户，应区分是否已经认证。商家类型例如外卖、超市等，出行类型例如拼车的司机。

###### 字段描述
+ 原生api包含字段
+ 是否已经认证
+ 认证日期
+ 用户名
+ 密码(加密后)
+ 信用度
+ 创建日期
+ 修改日期
+ 商户认证信息（商户凭证识别码什么的，可以考虑加密）
+ 类型 (商家类型、出行类型)

##### 临时用户-消费者
> 定义正在注册中的消费者，完成注册就移除

###### 字段
+ 原生api包含字段
+ 用户名
+ 密码(加密后)
+ 创建日期
+ 验证码

##### 临时用户-商户
> 定义正在注册中的商户，完成注册移除

###### 字段
+ 原生api包含字段
+ 用户名
+ 密码(加密后)
+ 创建日期
+ 类型 (商家类型、出行类型)
+ 验证码

## 系统级-记录类
> 记录全部转账记录、用户支付记录、已经认证用户列表

##### 总交易记录

###### 字段
+ 原生api转账字段
+ 用户主键
+ 交易发起方(主键)
+ 交易接受方(主键)
+ 进行日期
+ 交易类型(转账、退款、返现)

<!-- ##### 全部已经认证用户
###### 字段
+ 用户主键
+ 用户类型(消费者、商家类型、出行类型)
+ 用户认证时间 -->

##### 全部历史拼单记录
###### 字段
+ 订单号
+ 发起时间
+ 拼单类型(商户型拼单、出行类拼单、拼租类拼单)
+ 拼单消费者列表(外键)
+ 提供服务的商户主键
+ 交易金额
+ 交易实体(商品或非商品置空)
+ 订单状态(完成、取消)

## 业务级
### 业务级-实体类

##### 拼单类-商品实体
###### 字段
+ 实体ID
+ 商品名称
+ 商品价格
+ 隶属商户
+ 商品备注
+ 创建日期
+ 修改日期
+ 剩余数量

##### 拼车类-拼车要求实体
###### 字段
+ 实体ID
+ 提出要求的消费者ID
+ 要求司机的性别
+ 要求的拼车同伴的性别
+ 其他要求

##### 拼租类-租房要求实体
###### 字段
+ 实体ID
+ 提出要求的消费者ID
+ 室友性别要求
+ 房子户型要求
+ 房子其他要求

### 业务级-记录类

##### 商品拼单类-已完成的拼单记录
> 已经完成的拼单记录
###### 字段
+ 订单号
+ 发起时间
+ 结束时间
+ 拼单消费者列表(外键)
+ 提供服务的商户主键
+ 交易金额
+ 交易实体(商品或非商品置空)

##### 商品拼单类-正在进行的拼单记录
> 正在寻进行的拼单记录
###### 字段
+ 订单号
+ 发起时间
+ 已经加入到用户列表(外键)-
+ 提供服务的商户主键-
+ 交易金额
+ 交易实体(商品或非商品置空)-

##### 商品拼单类-已经取消的拼单记录
> 已经取消的拼单记录
###### 字段
+ 订单号
+ 发起时间
+ 取消时间
+ 拼单消费者列表(外键)
+ 提供服务的商户主键
+ 交易金额
+ 交易实体(商品或非商品置空)

##### 拼车类-已完成的拼车记录
> 已经完成的拼车记录
###### 字段
+ 订单号
+ 发起时间
+ 订单完成时间
+ 结束时间
+ 拼车消费者列表(外键)-
+ 提供服务的出行类商户主键-
+ 交易总金额
+ 拼车要求实体主键-
+ 车主姓名
+ 车牌号


##### 拼车类-正在等待中的拼车记录
> 正在等待中的拼车记录
###### 字段
+ 订单号
+ 发起时间
+ 拼车消费者列表(外键)-
+ 提供服务的出行类商户主键-
+ 拼车要求实体主键-
+ 车主姓名
+ 车牌号

##### 拼车类-正在行驶的拼车记录
> 正在等待的拼车记录
###### 字段
+ 订单号
+ 发起时间
+ 当前拼车消费者列表(外键)-
+ 提供服务的出行类商户主键-
+ 交易金额
+ 拼车要求实体主键-
+ 车主姓名
+ 车牌号

##### 拼车类-已经取消的拼车记录
> 正在进行的拼车记录
###### 字段
+ 订单号
+ 发起时间
+ 订单取消时间
+ 拼车消费者列表(外键)-
+ 提供服务的出行类商户主键-
+ 拼车要求实体主键-
+ 车主姓名
+ 车牌号

##### 拼租类-已完成的拼租记录
> 完成的拼租记录
##### 字段
+ 订单号
+ 发起时间
+ 结束时间
+ 拼租消费者列表(外键)-
+ 租房要求实体主键-

##### 拼租类-进行中的拼租记录
> 进行中的拼租记录
###### 字段
+ 订单号
+ 发起时间
+ 拼租消费者列表(外键)-
+ 租房要求实体主键-

##### 拼租类-取消的拼租记录
> 取消的拼租记录
###### 字段
+ 订单号
+ 发起时间
+ 取消时间
+ 拼租消费者列表(外键)-
+ 租房要求实体主键-


## 其他杂项
> 一些实用工具用表
##### 功能类-地理位置
> 描述当前某个用户的地理位置
###### 字段
+ 用户主键
+ 经度
+ 纬度

<!-- ##### 临时记录类-验证码
> 记录各种用到验证码功能的表
###### 字段
+ 用户主键
+ 验证码
+ 失效时间
+ 创建时间
+ 用途（注册或者其他...） -->

##### 临时记录类-session记录
> 记录session区分登陆和未登陆
###### 字段
+ 用户主键
+ session_token
+ 失效时间
+ 创建时间
